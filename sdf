<?php

require_once "header.php";

if (!isset($_SESSION['is_login'])) {
  $_SESSION['error'] = "Email and Password are required";
  header("Location: login.php");
}

// Fetch category data
$sqlCategory = "SELECT * FROM category";
$catResult = mysqli_query($conn, $sqlCategory);

// Fetch books data
$sqlBooks = "SELECT * FROM books";
$result = mysqli_query($conn, $sqlBooks);

if (!$result) {
  die("Error fetching books: " . mysqli_error($conn));
}

?>

<div class="container">
  <!-- ... (rest of your code) ... -->

  <div class="row">
    <?php foreach ($result as $book): ?>
      <div class="col-md-3">
        <div class="card">
          <img src="<?= $book['image'] ?>" class="card-img-top img-fluid" alt="...">
          <div class="card-body">
            <h5 class="card-title"><?= $book['title'] ?></h5>
            <p>Price: <?= $book['price'] ?></p>
            <a href="#" class="btn btn-primary">Go somewhere</a>
          </div>
        </div>
      </div>
    <?php endforeach; ?>
  </div>

</div>

<?php require_once "footer.php"; ?>
